{% extends 'base.html' %}

{% load humanize %}
{% block content %}
<div class="container">
    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8 text-center">
            <h2>{{post.titulo}}</h2>
            <h5>{{post.exerto}}</h5>
            <p class="text-muted mt-4">
                <small>
                    {{post.autor|title}} | {{post.data|naturalday|title}} | {{post.categoria}}
                </small>
            </p>
        </div>
        <div class="col-xl"></div>
    </div>

    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8">
            {% if post.imagem %}
            <img class="img-fluid pb-5 " src="{{post.imagem.url}}" alt="">
            {% endif %}

            {{post.conteudo|safe}}

        </div>
        <div class="col-xl"></div>
    </div>

    {% if comentarios %}
    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8">
            <h2 class="my-3">Comentários ({{comentarios.count}})</h2>

            {% for comentario in comentarios %}
                {% if comentario.usuario %}
                    <h5 class="mb-2 mt-5">{{comentario.usuario}}:</h5>
                {% else %}
                    <h5 class="mb-2 mt-5">{{comentario.nome}}:</h5>
                {% endif %}
                <small class="text-muted">{{comentario.data|naturalday|title}}</small>
                <p class="mb-1">{{comentario.comentario}}</p>
            
            {% endfor %}



        </div>
        <div class="col-xl"></div>
    </div>
    {% endif %}

    <div class="row pt-5">
        <div class="col-xl"></div>
        <div class="col-xl-8">
            <h2 class="my-3">Deixe um comentário</h2>

            <form method="POST" action="#envia_comentario">{% csrf_token %}
                <table class="table">
                    
                    {{form}}

                    <tr>
                        <td colspan="2">
                            {% include 'partials/_messages.html' %}
                            <input id="envia_comentario" type="submit" class="btn btn-primary"
                                value="Enviar">
                        </td>
                    </tr>
                </table>
            </form>

        </div>
        <div class="col-xl"></div>
    </div>
</div>
{% endblock content %}
